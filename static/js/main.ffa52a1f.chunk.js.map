{"version":3,"sources":["actions/index.js","containers/AddStep.js","components/ErrorMsg.js","components/ReferenceFormGroup.js","components/UnifierFormGroup.js","components/RenamingFormGroup.js","components/ResolutionParams.js","components/FactoringParams.js","components/Step.js","components/Proof.js","containers/ActualProof.js","components/Language.js","containers/ActualLanguage.js","containers/UndoRedo.js","containers/ImportExport.js","components/Help.js","components/App.js","model/term/Term.js","model/term/Term.Constant.js","model/term/Term.FunctionTerm.js","model/term/Term.Variable.js","model/formula/Formula.js","model/formula/Formula.Clause.js","model/formula/Formula.Literal.js","reducers/step.js","reducers/steps.js","reducers/language.js","reducers/index.js","index.js"],"names":["inputFocus","text","type","inputBlur","AddStep","dispatch","onSubmit","e","preventDefault","className","connect","ErrorMsg","error","input","hasOwnProperty","substring","location","start","offset","end","length","name","message","Reference","reference","index","number","onReference","onFocus","onBlur","htmlFor","id","onChange","target","value","Unifier","unifier","onUnifier","Renaming","renaming","onRenaming","Resolution","reference1","reference2","onReference1","onReference2","Factoring","Step","step","onDelete","onInsert","onUp","onDown","onRule","formula","valid","rule","onClick","disabled","Proof","steps","onStepDelete","onStepChange","onStepInsert","onStepUp","onStepDown","onRuleChange","order","map","key","allSteps","get","state","mapDispatchToProps","position","ActualProof","present","Language","language","onConstChange","onFunChange","onPredChange","consts","funs","preds","ActualLanguage","UndoRedo","canUndo","canRedo","onUndo","onRedo","role","UndoActionCreators","undo","redo","past","future","ImportExport","onImport","onExport","event","reader","FileReader","onload","files","result","readAsText","data","Help","App","Term","this","Error","Constant","other","FunctionTerm","subts","join","every","subt","i","equals","substitute","Variable","has","Formula","subfs","Clause","lits","litsMultiset","lit","toString","getLitsMultiset","tuple","contains","push","cl2","lm1","lm2","lit1","nlit1","negation","lit2","flatMap","l1","n1","Array","fill","concat","l2","n2","cl1","getResolvents","resolvent","lm","cl","getFactors","factor","Literal","neg","terms","res","term","action","validateReference","rank","parseInt","isNaN","object","validateSubs","subs","j","getFactories","checkArity","symbol","args","arityMap","expected","a","variable","_","constant","functionApplication","funSymbol","ee","Function","literal","negated","predSymbol","clause","literals","getSymbols","nonLogicalSymbols","Set","keys","isConstant","isFunction","isPredicate","isVariable","newStep","undefined","checkReferenceAfterInsert","checkReferenceAfterDelete","checkReferenceAfterMove","position1","position2","validateStep","parseSubstitution","Map","validateRenaming","validateUnifier","parseClause","validateClause","premise","getPremise","isFactorOf","premise1","premise2","isResolventOf","Object","assign","from","checked","s","add","set","delOrder","newSteps","delete","newOrder","filter","newRank","entries","newState","slice","validSymbols","symbols","validateConsts","validateFuns","symbol1","validatePreds","symbol2","originState","parseConstants","parseFunctions","obj","arity","parsePredicates","initialCombinedState","inputChange","originValue","newHistory","JSON","stringify","undoableState","undoable","languageState","stepsState","link","document","createElement","setAttribute","stateCopy","Blob","url","window","URL","createObjectURL","href","click","parse","currentState","previousHistory","store","createStore","reducer","render","getElementById"],"mappings":"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","file":"static/js/main.ffa52a1f.chunk.js","sourcesContent":["export const ADD_STEP = 'ADD_STEP';\nexport const CHANGE_STEP = 'CHANGE_STEP';\nexport const CHANGE_RULE = 'CHANGE_RULE';\nexport const CHANGE_UNIFIER = 'CHANGE_UNIFIER';\nexport const CHANGE_RENAMING = 'CHANGE_RENAMING';\nexport const CHANGE_REFERENCE1 = 'CHANGE_REFERENCE1';\nexport const CHANGE_REFERENCE2 = 'CHANGE_REFERENCE2';\nexport const DELETE_STEP = 'DELETE_STEP';\nexport const INSERT_STEP = 'INSERT_STEP';\nexport const STEP_UP = 'STEP_UP';\nexport const STEP_DOWN = 'STEP_DOWN';\nexport const CHANGE_CONST = 'CHANGE_CONST';\nexport const CHANGE_FUN = 'CHANGE_FUN';\nexport const CHANGE_PRED = 'CHANGE_PRED';\nexport const INPUT_FOCUS = 'INPUT_FOCUS';\nexport const INPUT_BLUR = 'INPUT_BLUR';\nexport const IMPORT_STATE = 'IMPORT_STATE';\nexport const EXPORT_STATE = 'EXPORT_STATE';\n\nexport const inputFocus = (text) => ({\n  type: INPUT_FOCUS,\n  text\n})\n\nexport const inputBlur = (text) => ({\n  type: INPUT_BLUR,\n  text\n})\n\nexport const addStep = () => ({\n  type: ADD_STEP\n})\n\nexport const changeStep = (id, text) => ({\n  type: CHANGE_STEP,\n  id,\n  text\n})\n\nexport const changeRule = (id, text) => ({\n  type: CHANGE_RULE,\n  id,\n  text\n})\n\nexport const changeUnifier = (id, text) => ({\n  type: CHANGE_UNIFIER,\n  id,\n  text\n})\n\nexport const changeRenaming = (id, text) => ({\n  type: CHANGE_RENAMING,\n  id,\n  text\n})\n\nexport const changeReference1 = (id, text) => ({\n  type: CHANGE_REFERENCE1,\n  id,\n  text\n})\n\nexport const changeReference2 = (id, text) => ({\n  type: CHANGE_REFERENCE2,\n  id,\n  text\n})\n\nexport const changeConst = (text) => ({\n  type: CHANGE_CONST,\n  text\n})\n\nexport const changeFun = (text) => ({\n  type: CHANGE_FUN,\n  text\n})\n\nexport const changePred = (text) => ({\n  type: CHANGE_PRED,\n  text\n})\n\nexport const deleteStep = (id) => ({\n  type: DELETE_STEP,\n  id\n})\n\nexport const insertStep = (position) => ({\n  type: INSERT_STEP,\n  position\n})\n\nexport const moveStepUp = (position) => ({\n  type: STEP_UP,\n  position\n})\n\nexport const moveStepDown = (position) => ({\n  type: STEP_DOWN,\n  position\n})\n\nexport const importState = (data) => ({\n  type: IMPORT_STATE,\n  data\n})\n\nexport const exportState = () => ({\n  type: EXPORT_STATE\n})","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { addStep } from '../actions'\r\n\r\nlet AddStep = ({ dispatch }) => {\r\n  return (\r\n    <div>\r\n      <form onSubmit={e => {\r\n        e.preventDefault()\r\n        dispatch(addStep())\r\n      }}>\r\n        <button type=\"submit\" className=\"btn btn-outline-success btn-sm mt-1\">\r\n          Add Step\r\n        </button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\nAddStep = connect()(AddStep)\r\n\r\nexport default AddStep\r\n","import React from 'react'\r\n\r\nconst ErrorMsg = ({error, input}) => {\r\n    if (error.hasOwnProperty(\"location\")) return (\r\n        <div className=\"invalid-feedback pr-1 pl-1\">\r\n            <b>{input.substring(0, error.location.start.offset)}<mark className=\"text-danger\">\r\n            {input.substring(error.location.start.offset, error.location.end.offset)}</mark>\r\n            {input.substring(error.location.end.offset, input.length)}</b><br/>\r\n            {error.name + \": \" + error.message}\r\n        </div>\r\n    ); else if (error) return (\r\n        <div className=\"invalid-feedback pr-1 pl-1\">\r\n            {error.name + \": \" + error.message}\r\n        </div>\r\n    ); else return null;\r\n}\r\nexport default ErrorMsg","import React from 'react'\nimport ErrorMsg from '../components/ErrorMsg'\n\nconst Reference = ({reference, index, number, onReference, onFocus, onBlur}) => {\n    return (\n        <div className=\"form-group col-2 mb-2\">\n          <label className=\"mb-1 fs-sm\" htmlFor={\"reference\" +number+\"-\" + index}>Premise {number}</label>\n          <input type=\"text\" className={`form-control form-control-sm ${reference.error ? \"is-invalid\" : \"\"}`} id={\"reference\" +number+\"-\" + index} \n          onChange={e => onReference(e.target.value)} \n          onBlur={e => onBlur(e.target.value)}\n          onFocus={e => onFocus(e.target.value)}\n          value={reference.input} />\n          <ErrorMsg error={reference.error} />\n        </div>\n    );\n}\nexport default Reference","import React from 'react'\nimport ErrorMsg from '../components/ErrorMsg'\n\nconst Unifier = ({ unifier, index, onUnifier, onFocus, onBlur}) => {\n    return (\n        <div className=\"form-group col mb-2\">\n            <label className=\"mb-1 fs-sm\" htmlFor={\"unifier-\" + index}>Unifier</label>\n            <input type=\"text\" className={`form-control form-control-sm ${unifier.error ? \"is-invalid\" : \"\"}`} id={\"unifier-\" + index}\n                onChange={e => onUnifier(e.target.value)} \n                onBlur={e => onBlur(e.target.value)}\n                onFocus={e => onFocus(e.target.value)}\n                value={unifier.input} />\n            <ErrorMsg error={unifier.error} input={unifier.input} />\n        </div>\n    );\n}\nexport default Unifier","import React from 'react'\nimport ErrorMsg from '../components/ErrorMsg'\n\nconst Renaming = ({renaming, index, onRenaming, onFocus, onBlur}) => {\n    return (\n        <div className=\"form-group col mb-2\">\n          <label className=\"mb-1 fs-sm\" htmlFor={\"renaming-\" + index}>Renaming</label>\n          <input type=\"text\" className={`form-control form-control-sm ${renaming.error ? \"is-invalid\" : \"\"}`} id={\"renaming-\" + index} \n          onChange={e => onRenaming(e.target.value)} \n          onBlur={e => onBlur(e.target.value)}\n          onFocus={e => onFocus(e.target.value)}\n          value={renaming.input} />\n          <ErrorMsg error={renaming.error} input={renaming.input} />\n        </div>\n    );\n}\nexport default Renaming","import React from 'react'\nimport Reference from './ReferenceFormGroup'\nimport Unifier from './UnifierFormGroup'\nimport Renaming from './RenamingFormGroup';\n\nconst Resolution = ({ reference1, reference2, renaming, unifier, index, onReference1, onReference2, onRenaming, onUnifier, onFocus, onBlur}) => {\n    return (\n        <div className=\"form-row\">\n            <Reference reference={reference1} index={index} number={1} onReference={onReference1} onFocus={onFocus} onBlur={onBlur}/>\n            <Renaming renaming={renaming} index={index} onRenaming={onRenaming} onFocus={onFocus} onBlur={onBlur}/>\n            <Reference reference={reference2} index={index} number={2} onReference={onReference2} onFocus={onFocus} onBlur={onBlur}/>\n            <Unifier unifier={unifier} index={index} onUnifier={onUnifier} onFocus={onFocus} onBlur={onBlur} />\n        </div>\n    );\n}\nexport default Resolution","import React from 'react'\nimport Reference from './ReferenceFormGroup'\nimport Unifier from './UnifierFormGroup'\n\nconst Factoring = ({ reference, unifier, index, onReference, onUnifier, onFocus, onBlur }) => {\n    return (\n        <div className=\"form-row\">\n            <Reference reference={reference} index={index} number={1} onReference={onReference} onFocus={onFocus} onBlur={onBlur}/>\n            <Unifier unifier={unifier} index={index} onUnifier={onUnifier} onFocus={onFocus} onBlur={onBlur}/>\n        </div>\n    );\n}\nexport default Factoring","import React from 'react'\nimport PropTypes from 'prop-types'\nimport ErrorMsg from '../components/ErrorMsg'\nimport Resolution from './ResolutionParams'\nimport Factoring from './FactoringParams'\n\nconst Step = ({ index, step, onChange, onDelete, onInsert, onUp, onDown, onRule, onRenaming, onUnifier, onReference1, onReference2, onBlur, onFocus }) => (\n  <div className=\"step\">\n    <div className=\"input-group mb-2 input-group-sm\">\n      <div className=\"input-group-prepend\">\n        <span className=\"input-group-text\">{index}</span>\n      </div>\n      <input type=\"text\" name=\"item\" className={`form-control \n        ${step.formula.error ? \"is-invalid\" : \"\"}\n        ${step.valid ? \"is-valid\" : \"\"}`} \n        onChange={e => onChange(e.target.value)}\n        onBlur={e => onBlur(e.target.value)}\n        onFocus={e => onFocus(e.target.value)}\n        value={step.formula.input}\n      />\n      <div className=\"input-group-append input-group-sm\">\n        <select className=\"form-control\" \n        onChange={e => onRule(e.target.value)} \n        value={step.rule}>\n          <option>Assumption</option>\n          <option>Resolution</option>\n          <option>Factoring</option>\n        </select>\n        <button type=\"button\" className=\"btn btn-outline-success btn-sm\" onClick={onInsert}> + </button>\n        <button type=\"button\" className=\"btn btn-outline-secondary btn-sm\" onClick={onUp} disabled={onUp === null}> ↑ </button>\n        <button type=\"button\" className=\"btn btn-outline-secondary btn-sm\" onClick={onDown} disabled={onDown === null}> ↓ </button>\n        <button className=\"btn btn-outline-danger\" type=\"button\" onClick={onDelete} >X</button>\n      </div>\n      <ErrorMsg error={step.formula.error} input={step.formula.input} />\n    </div>\n    {\n      {\n        'Resolution': <Resolution reference1={step.reference1} reference2={step.reference2} renaming={step.renaming} unifier={step.unifier}\n          index={index} onReference1={onReference1} onReference2={onReference2} onRenaming={onRenaming} onUnifier={onUnifier} \n          onFocus={onFocus} onBlur={onBlur}/>,\n        'Factoring': <Factoring reference={step.reference2} unifier={step.unifier} index={index} onReference={onReference2} onUnifier={onUnifier}\n          onFocus={onFocus} onBlur={onBlur} />\n      }[step.rule]\n    }\n  </div>\n);\n\nStep.propTypes = {\n  index: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onDelete: PropTypes.func.isRequired,\n  onInsert: PropTypes.func.isRequired\n}\n\nexport default Step","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Step from './Step'\n\nconst Proof = ({ steps, onStepDelete, onStepChange, onStepInsert, onStepUp, onStepDown, onRuleChange, onRenaming, onUnifier, onReference1, onReference2, inputFocus, inputBlur}) => (\n  <div className=\"mt-2\">\n    <h2 className=\"mb-0\">Proof</h2>\n    {steps.order.map((id, index) =>\n      <Step\n        key={id}\n        step = {steps.allSteps.get(id)} \n        index={index+1}\n        state={steps}\n        onChange={(value) => onStepChange(id, value)}\n        onRule={(value) => onRuleChange(id, value)}\n        onRenaming={(value) => onRenaming(id, value)}\n        onUnifier={(value) => onUnifier(id, value)}\n        onReference1={(value) => onReference1(id, value)}\n        onReference2={(value) => onReference2(id, value)}\n        onDelete={() => onStepDelete(id)}\n        onInsert={() => onStepInsert(index)}\n        onUp={index === 0 ? null : () => onStepUp(index)}\n        onDown={index === steps.order.length-1 ? null : () => onStepDown(index)}\n        onFocus={(value) => inputFocus(value)}\n        onBlur={(value) => inputBlur(value)}\n      />\n    )}\n  </div>\n)\n\nProof.propTypes = {\n  steps: PropTypes.shape({\n    order: PropTypes.arrayOf(PropTypes.number.isRequired),\n    allSteps : PropTypes.instanceOf(Map).isRequired,\n    rank: PropTypes.instanceOf(Map).isRequired\n  }).isRequired,\n  onStepDelete: PropTypes.func.isRequired,\n  onStepChange: PropTypes.func.isRequired,\n  onRuleChange: PropTypes.func.isRequired,\n  onStepInsert: PropTypes.func.isRequired,\n  onStepUp: PropTypes.func.isRequired,\n  onStepDown: PropTypes.func.isRequired\n}\n\nexport default Proof","import { connect } from 'react-redux'\nimport { deleteStep, changeStep, insertStep, moveStepDown, moveStepUp, changeRule, changeReference1, changeReference2, changeRenaming, changeUnifier, inputFocus, inputBlur } from '../actions'\nimport Proof from '../components/Proof'\n\nconst mapStateToProps = (state) => ({\n  steps: state.present.steps\n})\n\nconst mapDispatchToProps = ({\n  onStepDelete: deleteStep,\n  onStepChange: changeStep,\n  onRuleChange: changeRule,\n  onRenaming: changeRenaming,\n  onUnifier: changeUnifier,\n  onReference1: changeReference1,\n  onReference2: changeReference2,\n  onStepInsert: insertStep,\n  onStepUp: moveStepUp,\n  onStepDown: moveStepDown,\n  inputFocus: inputFocus,\n  inputBlur: inputBlur\n})\n\nconst ActualProof = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Proof)\n\nexport default ActualProof","import React from 'react'\r\nimport ErrorMsg from '../components/ErrorMsg'\r\n\r\nconst Language = ({language, onConstChange, onFunChange, onPredChange, onFocus, onBlur}) => {\r\n    return (\r\n    <div className=\"mt-2\">\r\n        <h2>Language</h2>\r\n        <div className=\"input-group mb-2 input-group-sm\">\r\n            <div className=\"input-group-prepend\">\r\n                <span className=\"input-group-text\" id=\"basic-addon1\">Constants</span>\r\n            </div>\r\n            <input type=\"text\" className={`form-control ${language.consts.error ? \"is-invalid\" : \"\"}`} name=\"constants\"\r\n            onChange={e => onConstChange(e.target.value)}\r\n            onBlur={e => onBlur(e.target.value)}\r\n            onFocus={e => onFocus(e.target.value)}\r\n            value={language.consts.input}/>\r\n            <ErrorMsg error={language.consts.error} input={language.consts.input} />\r\n        </div>\r\n        \r\n        <div className=\"input-group mb-2 input-group-sm\">\r\n            <div className=\"input-group-prepend\">\r\n                <span className=\"input-group-text\" id=\"basic-addon1\">Functions</span>\r\n            </div>\r\n            <input type=\"text\" className={`form-control ${language.funs.error ? \"is-invalid\" : \"\"}`} name=\"functions\" \r\n            onChange={e => onFunChange(e.target.value)}\r\n            onBlur={e => onBlur(e.target.value)}\r\n            onFocus={e => onFocus(e.target.value)} \r\n            value={language.funs.input}/>\r\n            <ErrorMsg error={language.funs.error} input={language.funs.input} />\r\n        </div>\r\n        <div className=\"input-group mb-2 input-group-sm\">\r\n            <div className=\"input-group-prepend\">\r\n                <span className=\"input-group-text\" id=\"basic-addon1\">Predicates</span>\r\n            </div>\r\n            <input type=\"text\" className={`form-control ${language.preds.error ? \"is-invalid\" : \"\"}`} name=\"predicates\" \r\n            onChange={e => onPredChange(e.target.value)} \r\n            onBlur={e => onBlur(e.target.value)}\r\n            onFocus={e => onFocus(e.target.value)}\r\n            value={language.preds.input}/>\r\n            <ErrorMsg error={language.preds.error} input={language.preds.input} />\r\n        </div>\r\n\r\n    </div>\r\n)}\r\n\r\nexport default Language","import { connect } from 'react-redux'\r\nimport { changeConst, changeFun, changePred, inputFocus, inputBlur } from '../actions'\r\nimport Language from '../components/Language'\r\n\r\nconst mapStateToProps = (state) => ({\r\n  language: state.present.language\r\n})\r\n\r\nconst mapDispatchToProps = ({\r\n    onConstChange: changeConst,\r\n    onFunChange: changeFun,\r\n    onPredChange: changePred,\r\n    onFocus: inputFocus,\r\n    onBlur: inputBlur\r\n})\r\n\r\nconst ActualLanguage = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Language)\r\n\r\nexport default ActualLanguage\r\n","import React from 'react'\r\nimport { ActionCreators as UndoActionCreators } from 'redux-undo'\r\nimport { connect } from 'react-redux'\r\n\r\nlet UndoRedo = ({ canUndo, canRedo, onUndo, onRedo }) => (\r\n  <div className=\"btn-group\" role=\"group\">\r\n    <button type=\"button\" className=\"btn btn-secondary btn-sm\" onClick={onUndo} disabled={!canUndo}>↶ Undo</button>\r\n    <button type=\"button\" className=\"btn btn-secondary btn-sm\" onClick={onRedo} disabled={!canRedo}>Redo ↷</button>\r\n  </div>\r\n)\r\n\r\nconst mapStateToProps = (state) => ({\r\n  canUndo: state.past.length > 0,\r\n  canRedo: state.future.length > 0\r\n})\r\n\r\nconst mapDispatchToProps = ({\r\n  onUndo: UndoActionCreators.undo,\r\n  onRedo: UndoActionCreators.redo\r\n})\r\n\r\nUndoRedo = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(UndoRedo)\r\n\r\nexport default UndoRedo\r\n","import React from 'react'\nimport { importState, exportState } from '../actions'\nimport { connect } from 'react-redux'\n\nlet ImportExport = ({ onImport, onExport}) => (\n  <div className=\"float-right\">\n    <label htmlFor=\"fileUpload\" className=\"btn btn-secondary btn-sm mb-0 mr-1\">Import</label>\n    <input type=\"file\" id=\"fileUpload\" className=\"btn btn-secondary btn-sm d-none\" onChange={\n      event => { \n        let reader = new FileReader();\n        reader.onload = (function(file) {\n          return function(e) {\n            onImport(e.target.result);\n          };\n        })(event.target.files[0]);\n        reader.readAsText(event.target.files[0]);\n        }\n      } onClick={ event => event.target.value = \"\"}/>\n    <button type=\"button\" className=\"btn btn-secondary btn-sm\" onClick={onExport} >Export</button>\n  </div>\n)\n\nconst mapStateToProps = (state) => ({\n  state: state.present\n})\n\nconst mapDispatchToProps = ({\n  onImport: importState,\n  onExport: exportState\n})\n\nImportExport = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ImportExport)\n\nexport default ImportExport\n","import React from 'react'\n\nconst Help = () => (\n  <div className=\"mt-2 d-inline-block \">\n    <h4>Help</h4>\n    <div className=\"mb-2\">\n      <p className=\"mb-0\">Language - Declarations of non-logical symbols:</p>\n      <ul className=\"fs-sm\">\n        <li >Symbols declarations must be comma-separated</li>\n        <li >A constant declaration is just the constant symbol</li>\n        <li >A function or predicate symbol declaration has the form symbol/arity (e.g. f/1)</li>\n      </ul>\n    </div>\n    <div>\n      <p className=\"mb-0\">Proof - Alternative ways of writing logical symbols:</p>\n      <ul className=\"fs-sm\">\n        <li >Disjunction: ∨, ||, |, \\/</li>\n        <li >Negation: ¬, -, !, ~</li>\n        <li >Substitution: ↦, ->, ⟼, |-> or (var, term)</li>\n        <li >Empty clause: □, ▫︎, ◽︎, ◻︎, ⬜︎, ▢, ⊥, [], _|_</li>\n      </ul>\n    </div>\n  </div>\n);\nexport default Help","import React from 'react'\r\nimport AddStep from '../containers/AddStep'\r\nimport ActualProof from '../containers/ActualProof'\r\nimport ActualLanguage from '../containers/ActualLanguage'\r\nimport UndoRedo from '../containers/UndoRedo'\r\nimport ImportExport from '../containers/ImportExport'\r\nimport Help from '../components/Help'\r\n\r\nconst App = () => (\r\n  <div>\r\n    <UndoRedo />\r\n    <ImportExport />\r\n    <ActualLanguage />\r\n    <ActualProof />\r\n    <AddStep />\r\n    <Help />\r\n  </div>\r\n)\r\n\r\nexport default App","class Term {\r\n\r\n  constructor(name) {\r\n    this.name = name;\r\n  }\r\n\r\n  toString() {\r\n    return this.name;\r\n  }\r\n\r\n  substitute(map) {\r\n    new Error('Unimplemented');\r\n  }\r\n\r\n  equals() {\r\n    new Error('Unimplemented');\r\n  }\r\n\r\n}\r\n\r\nexport default Term;","import Term from \"./Term\";\r\n\r\nclass Constant extends Term {\r\n\r\n  constructor(name) {\r\n    super(name);\r\n  }\r\n\r\n  equals(other) {\r\n    return other instanceof Constant && this.name === other.name\r\n  }\r\n\r\n  substitute(map){\r\n    return new Constant(this.name);\r\n  }\r\n\r\n}\r\n\r\nexport default Constant;","import Term from \"./Term\";\n\nclass FunctionTerm extends Term {\n\n  constructor(name, subts = []) {\n    super(name);\n    this.subts = subts;\n  }\n\n  toString() {\n    return `${ this.name }(${ this.subts.join(', ') })`;\n  }\n\n  equals(other) {\n    return other instanceof FunctionTerm &&\n      this.name === other.name &&\n      this.subts.length === other.subts.length &&\n      this.subts.every((subt, i) => subt.equals(other.subts[i]))\n  }\n\n  substitute(map){\n    return new FunctionTerm(\n      this.name,\n      this.subts.map( subt => subt.substitute(map))\n    );\n  }\n\n}\n\nexport default FunctionTerm;","import Term from \"./Term\";\r\n\r\nclass Variable extends Term {\r\n\r\n  constructor(name) {\r\n    super(name);\r\n  }\r\n\r\n  equals(other) {\r\n    return other instanceof Variable && this.name === other.name\r\n  }\r\n\r\n  substitute(map){\r\n    if (map && map.has(this.name)) {\r\n      return map.get(this.name);\r\n    }\r\n    return new Variable(this.name);\r\n  }\r\n\r\n}\r\n\r\nexport default Variable;","class Formula {\r\n\r\n  constructor(subfs) {\r\n    this.subfs = subfs;\r\n  }\r\n\r\n  subfs() {\r\n    return this.subfs;\r\n  }\r\n\r\n  toString() {\r\n    new Error('Unimplemented');\r\n  }\r\n\r\n  equals(other){ \r\n    new Error('Unimplemented');\r\n  }\r\n\r\n  substitute(map) {\r\n    new Error('Unimplemented');\r\n  }\r\n\r\n}\r\n\r\nexport default Formula;","import Formula from \"./Formula\";\r\n\r\nclass Clause extends Formula {\r\n\r\n  constructor(lits = []) {\r\n    super();\r\n    this.lits = lits;\r\n    this.litsMultiset = null;\r\n  }\r\n\r\n  toString() {\r\n    return this.lits.map( lit => lit.toString() ).join(' ∨ ');\r\n  }\r\n\r\n  equals(other){ \r\n    if (!(other instanceof Clause) || this.lits.length !== other.lits.length) return false;\r\n    for (let tuple of this.getLitsMultiset()){\r\n      if (!other.has(tuple[0])) return false;\r\n      if (other.get(tuple[0]) !== tuple[1]) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  substitute(map) {\r\n    return new Clause (\r\n      this.lits.map( lit => lit.substitute(map))\r\n    );\r\n  }\r\n\r\n  getLitsMultiset() {\r\n    if (this.litsMultiset != null) {\r\n      return this.litsMultiset;\r\n    }\r\n    this.litsMultiset = [];\r\n    var contains = false;\r\n    for (let lit of this.lits){\r\n      contains = false;\r\n      for (let tuple of this.litsMultiset){\r\n        if (tuple[0].equals(lit)) {\r\n          tuple[1]++;\r\n          contains = true;\r\n          break;\r\n        }\r\n      }\r\n      if (!contains) {\r\n        this.litsMultiset.push([lit, 1]);\r\n      }\r\n    }\r\n    return this.litsMultiset;\r\n  }\r\n  \r\n  has(key){\r\n    for (const tuple of this.getLitsMultiset()) {\r\n      if (tuple[0].equals(key)){\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  get(key){\r\n    for (const tuple of this.getLitsMultiset()) {\r\n      if (tuple[0].equals(key)){\r\n        return tuple[1];\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  * getResolvents(cl2, renaming, unifier) {\r\n    const lm1 = this.substitute(renaming).substitute(unifier).getLitsMultiset();\r\n    const lm2 = cl2.substitute(unifier).getLitsMultiset();\r\n    for (const [lit1, _] of lm1){\r\n      const nlit1 = lit1.negation();\r\n      for (const [lit2, _] of lm2){\r\n        if (nlit1.equals(lit2)){\r\n          yield new Clause(lm1.flatMap(([l1, n1]) => new Array(lit1 === l1 ? n1 - 1 : n1).fill(l1))\r\n          .concat(lm2.flatMap(([l2, n2]) => new Array(lit2 === l2 ? n2 - 1 : n2).fill(l2))));\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  isResolventOf(cl1, cl2, renaming, unifier){\r\n    for (const resolvent of cl1.getResolvents(cl2, renaming, unifier)) {\r\n      if (this.equals(resolvent)){\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  * getFactors(unifier) {\r\n    const lm = this.substitute(unifier).getLitsMultiset();\r\n    for (const [lit, n] of lm) {\r\n      if (n >= 2) {\r\n        yield new Clause(lm.flatMap(([lit1, n1]) => new Array(lit1 === lit ? n1 - 1 : n1).fill(lit1)));\r\n      }\r\n    }\r\n  }\r\n\r\n  isFactorOf(cl, unifier){\r\n    for (const factor of cl.getFactors(unifier)){\r\n      if (this.equals(factor)) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n}\r\n\r\nexport default Clause;","import Formula from \"./Formula\";\r\n\r\nclass Literal extends Formula {\r\n\r\n  constructor(neg, name, terms = []) {\r\n    super();\r\n    this.neg = neg;\r\n    this.name = name;\r\n    this.terms = terms;\r\n  }\r\n\r\n  toString() {\r\n    let res = '';\r\n    if (this.neg) res += '¬';\r\n    return res + this.name + '(' + this.terms.map(term => term.toString()).join(', ') + ')';\r\n  }\r\n\r\n  equals(other) {\r\n    return other instanceof Literal &&\r\n      this.neg === other.neg &&\r\n      this.name === other.name &&\r\n      this.terms.length === other.terms.length &&\r\n      this.terms.every((term, i) => term.equals(other.terms[i]))\r\n  }\r\n\r\n  negation(){\r\n    return new Literal(\r\n      !this.neg,\r\n      this.name,\r\n      this.terms\r\n    )\r\n  }\r\n\r\n  substitute(map){\r\n    return new Literal(\r\n      this.neg,\r\n      this.name,\r\n      this.terms.map( term => term.substitute(map))\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default Literal;","import { CHANGE_STEP, CHANGE_RULE, CHANGE_RENAMING, CHANGE_REFERENCE1, CHANGE_REFERENCE2, CHANGE_UNIFIER} from '../actions'\nimport { parseClause, parseSubstitution } from '@fmfi-uk-1-ain-412/js-fol-parser';\nimport { Variable, Constant, Function, Literal, Clause } from '../model/index'\n\nexport const step = (step, action) => {\n  switch (action.type) {\n    case CHANGE_STEP: {\n      return {\n        ...step,\n        formula: {\n          ...step.formula,\n          input: action.text\n        }\n      };\n    }\n\n    case CHANGE_RULE: {\n      return { ...step, rule: action.text };\n    }\n\n    case CHANGE_RENAMING: {\n      return {\n        ...step,\n        renaming:{\n          ...step.renaming,\n          input: action.text\n        }\n      };\n    }\n\n    case CHANGE_UNIFIER: {\n      return { ...step, unifier: {\n        ...step.unifier,\n        input: action.text\n      }};\n    }\n\n    case CHANGE_REFERENCE1: {\n      return { ...step, reference1 : {\n        ...step.reference1,\n        input: action.text\n      }};\n    }\n\n    case CHANGE_REFERENCE2: {\n      return { ...step, reference2 : {\n        ...step.reference2,\n        input: action.text\n      }};\n    }\n\n    default:\n      return step\n  }\n}\n\nexport function validateRenaming(renaming, language) {\n  renaming.error = \"\";\n  try {\n    if (renaming.input !== \"\") {\n      let subs = parseSubstitution(renaming.input, getSymbols(language), getFactories(language));\n      renaming.object = new Map(subs);\n      for (const [key, value] of renaming.object) {\n        if (!(value instanceof Variable)) {\n          renaming.error = {\n            name: \"TypeError\",\n            message: \"\\\"\" + key + \"\\\" is renamed to \\\"\" + value + \"\\\", which is not a variable\"\n          }\n        }\n      }\n      if (!renaming.error) {\n        renaming.error = validateSubs(subs);\n      }\n    } else {\n      renaming.object = undefined;\n    }\n  } catch (e) {\n    renaming.error = e;\n  }\n  return [renaming.error ? false : true, renaming];\n}\n\nexport function validateUnifier(unifier, language) {\n  unifier.error = \"\";\n  try {\n    if (unifier.input !== \"\") {\n      let subs = parseSubstitution(unifier.input, getSymbols(language), getFactories(language));\n      unifier.object = new Map(subs);\n      unifier.error = validateSubs(subs);\n    } else {\n      unifier.object = undefined;\n    }\n  } catch (e) {\n    unifier.error = e;\n  }\n  return [unifier.error ? false : true, unifier];\n}\n\nexport function validateReference(reference, id, state) {\n  reference.error = \"\";\n  if (reference.input !== \"\") {\n    if (state.rank.get(id) < parseInt(reference.input) || parseInt(reference.input) < 1) {\n      reference.error = {\n        name: \"IndexError\",\n        message: \"Index out of range.\"\n      };\n    } else if (isNaN(parseInt(reference.input))) {\n      reference.error = {\n        name: \"SyntaxError\",\n        message: \"Expected number but \\\"\" + reference.input + \"\\\" found.\"\n      };\n    } else {\n      reference.object = parseInt(reference.input) - 1;\n      reference.error = \"\"\n    }\n  } else {\n    reference.error = {\n      name: \"EmptyError\",\n      message: \"This field cannot be empty\"\n    }\n  }\n  return [reference.error ? false : true, reference];\n}\n\nexport function validateSubs(subs) {\n  for (let i = 0; i < subs.length; i++) {\n    for (let j = i + 1; j < subs.length; j++) {\n      if (subs[i][0] === subs[j][0]) {\n        return {\n          name: \"DuplicityError\",\n          message: \"Symbol \\\"\" + subs[i][0] + \"\\\" is already being substituted\"\n        };\n      }\n    }\n  }\n  return \"\";\n}\n\nexport function validateClause(formula, language) {\n  formula.error = \"\";\n  try {\n    formula.object = parseClause(\n      formula.input,\n      getSymbols(language),\n      getFactories(language)\n    );\n  } catch (e) {\n    formula.error = e;\n  }\n  return [formula.error ? false : true, formula];\n}\n\nexport function getFactories(language) {\n  function checkArity(symbol, args, arityMap, { expected }) {\n    const a = arityMap.get(symbol);\n    if (args.length !== a) {\n      expected(`${a} argument${(a == 1 ? '' : 's')} to ${symbol}`);\n    }\n  }\n  return {\n    variable: (symbol, _) =>\n      new Variable(symbol),\n    constant: (symbol, _) =>\n      new Constant(symbol),\n    functionApplication: (funSymbol, args, ee) => {\n      checkArity(funSymbol, args, language.funs.object, ee);\n      return new Function(funSymbol, args);\n    },\n    literal: (negated, predSymbol, args, ee) => {\n      checkArity(predSymbol, args, language.preds.object, ee);\n      return new Literal(negated, predSymbol, args);\n    },\n    clause: (literals, _) =>\n      new Clause(literals)\n  }\n}\n\nexport function getSymbols(language) {\n  const nonLogicalSymbols = new Set([...language.consts.object, ...language.funs.object.keys(), ...language.preds.object.keys()]);\n  return {\n    isConstant: (symbol) =>\n      language.consts.object.has(symbol),\n    isFunction: (symbol) =>\n      language.funs.object.has(symbol),\n    isPredicate: (symbol) =>\n      language.preds.object.has(symbol),\n    isVariable: (symbol) =>\n      !nonLogicalSymbols.has(symbol),\n  }\n}","import { ADD_STEP, CHANGE_STEP, DELETE_STEP, INSERT_STEP, STEP_UP, STEP_DOWN, CHANGE_RULE, CHANGE_RENAMING, CHANGE_REFERENCE1, CHANGE_REFERENCE2, CHANGE_UNIFIER, CHANGE_CONST, CHANGE_FUN, CHANGE_PRED, IMPORT_STATE } from '../actions'\nimport { step, validateReference, validateRenaming, validateUnifier, validateClause } from './step'\n\nconst newStep = {\n  formula: {\n    input: \"\",\n    object: undefined,\n    error: \"\"\n  },\n  rule: \"Assumption\",\n  reference1: {\n    input: \"\",\n    object: undefined,\n    error: \"\"\n  },\n  renaming: {\n    input: \"\",\n    object: undefined,\n    error: \"\"\n  },\n  reference2: {\n    input: \"\",\n    object: undefined,\n    error: \"\"\n  },\n  unifier: {\n    input: \"\",\n    object: undefined,\n    error: \"\"\n  },\n  valid: false\n};\n\nconst steps = (state = { order: [], allSteps: new Map(), rank: new Map(), id: 0 }, action = { type: undefined }, language) => {\n  switch (action.type) {\n    case ADD_STEP:\n      return Object.assign({}, state, {\n        order: [\n          ...state.order,\n          state.id,\n        ],\n        allSteps: new Map([\n          ...state.allSteps,\n          [state.id, newStep]\n        ]),\n        rank: new Map([\n          ...state.rank,\n          [state.id, state.order.length]\n        ]),\n        id: state.id+1\n      })\n\n    case CHANGE_RULE:\n    case CHANGE_RENAMING:\n    case CHANGE_UNIFIER:\n    case CHANGE_REFERENCE1:\n    case CHANGE_REFERENCE2:\n    case CHANGE_STEP: {\n      const allSteps = new Map(state.allSteps);\n      let from = state.rank.get(action.id);\n      let checked = new Set();\n      for (let i = from; i < state.order.length; i++) {\n        let id = state.order[i];\n        let s = allSteps.get(id);\n        if (i === from) {\n          checked.add(i);\n          allSteps.set(id, validateStep(\n            step(s, action),\n            id,\n            state,\n            language\n          ));\n        }\n        else if ((s.rule === \"Factoring\" && checked.has(s.reference2.object)) ||\n          (s.rule === \"Resolution\" && (checked.has(s.reference2.object) || checked.has(s.reference1.object)))) {\n          checked.add(i);\n          allSteps.set(id, validateStep(\n            allSteps.get(id),\n            id,\n            { ...state, allSteps },\n            language\n          ));\n        }\n      }\n      return { ...state, allSteps };\n    }\n\n    case DELETE_STEP: {\n      let delOrder = state.rank.get(action.id);\n      let newSteps = new Map([...state.allSteps]);\n      newSteps.delete(action.id);\n      let newOrder = [...state.order.filter(id => id !== action.id)];\n      const position = state.rank.get(action.id);\n      let newRank = new Map([...state.rank]);\n      newRank.delete(action.id);\n      for (let [key, value] of newRank.entries()) {\n        if (value > delOrder) {\n          newRank.set(key, value - 1)\n        }\n      }\n      for (let i = position + 1; i < state.order.length; i++) {\n        const id = state.order[i];\n        let step = newSteps.get(id);\n        newSteps.set(id, {\n          ...step,\n          reference1: checkReferenceAfterDelete({ ...step.reference1 }, position),\n          reference2: checkReferenceAfterDelete({ ...step.reference2 }, position)\n        })\n      }\n      let newState = { ...state, rank: newRank, order: newOrder, allSteps: newSteps };\n      for (let i = position; i < newState.order.length; i++) {\n        let id = newState.order[i];\n        newSteps.set(id, validateStep(\n          newSteps.get(id),\n          id,\n          { ...newState, newSteps },\n          language\n        ));\n      }\n      return {\n        ...newState,\n        allSteps: newSteps\n      };\n    }\n\n    case INSERT_STEP: {\n      let newRank = new Map([...state.rank]);\n      for (let [key, value] of newRank.entries()) {\n        if (value >= action.position) {\n          newRank.set(key, value + 1)\n        }\n      }\n      newRank.set(state.id, action.position);\n      let newOrder = [\n        ...state.order.slice(0, action.position),\n        state.id,\n        ...state.order.slice(action.position)\n      ];\n      let newSteps = new Map([\n        ...state.allSteps,\n        [state.id, newStep]\n      ]);\n      for (let i = action.position + 1; i < state.order.length; i++) {\n        const id = state.order[i];\n        let step = newSteps.get(id);\n        newSteps.set(id, {\n          ...step,\n          reference1: checkReferenceAfterInsert({ ...step.reference1 }, action.position),\n          reference2: checkReferenceAfterInsert({ ...step.reference2 }, action.position)\n        })\n      }\n      let newState = { ...state, rank: newRank, order: newOrder, allSteps: newSteps, id: state.id+1 };\n      for (let i = action.position + 1; i < newState.order.length; i++) {\n        let id = newState.order[i];\n        newSteps.set(id, validateStep(\n          newSteps.get(id),\n          id,\n          { ...newState, newSteps },\n          language\n        ));\n      }\n      return {\n        ...newState,\n        allSteps: newSteps\n      }\n    }\n\n    case STEP_UP: {\n      let newRank = new Map([...state.rank]);\n      newRank.set(state.order[action.position], action.position - 1);\n      newRank.set(state.order[action.position - 1], action.position);\n      let newOrder = [\n        ...state.order.slice(0, action.position - 1),\n        state.order[action.position],\n        state.order[action.position - 1],\n        ...state.order.slice(action.position + 1)\n      ]\n      let newSteps = new Map([...state.allSteps]);\n      for (let i = action.position - 1; i < state.order.length; i++) {\n        const id = state.order[i];\n        let step = newSteps.get(id);\n        newSteps.set(id, {\n          ...step,\n          reference1: checkReferenceAfterMove({ ...step.reference1 }, action.position, action.position - 1),\n          reference2: checkReferenceAfterMove({ ...step.reference2 }, action.position, action.position - 1)\n        })\n      }\n      let newState = { ...state, rank: newRank, order: newOrder, allSteps: newSteps };\n      let checked = new Set();\n      for (let i = action.position - 1; i < newState.order.length; i++) {\n        const id = newState.order[i];\n        let step = newSteps.get(id);\n        if (i === action.position - 1 || i === action.position ||\n          (step.rule === \"Factoring\" && checked.has(step.reference2.object)) ||\n          (step.rule === \"Resolution\" && (checked.has(step.reference2.object) || checked.has(step.reference1.object)))) {\n          checked.add(i);\n          newSteps.set(id, validateStep(\n            newSteps.get(id),\n            id,\n            { ...newState, newSteps },\n            language\n          ));\n        }\n      }\n      return {\n        ...newState,\n        allSteps: newSteps\n      }\n    }\n\n    case STEP_DOWN: {\n      let newRank = new Map([...state.rank]);\n      newRank.set(state.order[action.position], action.position + 1);\n      newRank.set(state.order[action.position + 1], action.position);\n      let newOrder = [\n        ...state.order.slice(0, action.position),\n        state.order[action.position + 1],\n        state.order[action.position],\n        ...state.order.slice(action.position + 2)\n      ]\n      let newSteps = new Map([...state.allSteps]);\n      for (let i = action.position; i < state.order.length; i++) {\n        const id = state.order[i];\n        let step = newSteps.get(id);\n        newSteps.set(id, {\n          ...step,\n          reference1: checkReferenceAfterMove({ ...step.reference1 }, action.position, action.position + 1),\n          reference2: checkReferenceAfterMove({ ...step.reference2 }, action.position, action.position + 1)\n        })\n      }\n      let newState = { ...state, rank: newRank, order: newOrder, allSteps: newSteps };\n      let checked = new Set();\n      for (let i = action.position; i < newState.order.length; i++) {\n        const id = newState.order[i];\n        let step = newSteps.get(id);\n        if (i === action.position || i === action.position + 1 ||\n          (step.rule === \"Factoring\" && checked.has(step.reference2.object)) ||\n          (step.rule === \"Resolution\" && (checked.has(step.reference2.object) || checked.has(step.reference1.object)))) {\n          checked.add(i);\n          newSteps.set(id, validateStep(\n            newSteps.get(id),\n            id,\n            { ...newState, newSteps },\n            language\n          ));\n        }\n      }\n      return {\n        ...newState,\n        allSteps: newSteps\n      }\n    }\n\n    case CHANGE_CONST:\n    case CHANGE_FUN:\n    case CHANGE_PRED: \n    case IMPORT_STATE: {\n      const allSteps = new Map(state.allSteps);\n      for (let id of state.order) {\n        allSteps.set(id, validateStep(\n          step(allSteps.get(id), action),\n          id,\n          { ...state, allSteps },\n          language\n        ));\n      }\n      return { ...state, allSteps };\n    }\n\n    default:\n      return state\n  }\n}\n\nfunction checkReferenceAfterInsert(reference, position) {\n  if (reference.object >= position) {\n    reference = {\n      object: reference.object + 1,\n      input: reference.object + 2 + \"\",\n      error: \"\"\n    }\n  }\n  return reference;\n}\n\nfunction checkReferenceAfterDelete(reference, position) {\n  if (reference.object > position) {\n    reference = {\n      object: reference.object - 1,\n      input: reference.object + \"\",\n      error: \"\"\n    }\n  } else if (reference.object === position) {\n    reference = {\n      object: undefined,\n      input: \"\",\n      error: \"\"\n    }\n  }\n  return reference;\n}\n\nfunction checkReferenceAfterMove(reference, position1, position2) {\n  if (reference.object === position1) {\n    reference = {\n      object: position2,\n      input: position2 + 1 + \"\",\n      error: \"\"\n    }\n  } else if (reference.object === position2) {\n    reference = {\n      object: position1,\n      input: position1 + 1 + \"\",\n      error: \"\"\n    }\n  }\n  return reference;\n}\n\nfunction validateStep(step, id, state, language) {\n  let reference1 = validateReference({ ...step.reference1 }, id, state);\n  let reference2 = validateReference({ ...step.reference2 }, id, state);\n  let renaming = validateRenaming({ ...step.renaming }, language);\n  let unifier = validateUnifier({ ...step.unifier }, language);\n  let formula = validateClause({ ...step.formula }, language)\n  let newStep = {\n    ...step,\n    reference1: reference1[1],\n    reference2: reference2[1],\n    renaming: renaming[1],\n    unifier: unifier[1],\n    formula: formula[1]\n  }\n  switch (step.rule) {\n    case \"Factoring\": {\n      if (!reference2[0]) {\n        return { ...newStep, valid: false };\n      }\n      const premise = getPremise(reference2[1].object, state);\n      if (!premise || !formula[0]) {\n        return { ...newStep, valid: false };\n      }\n\n      if (newStep.formula.object.isFactorOf(premise.formula.object, newStep.unifier.object)) {\n        return { ...newStep, valid: true, formula: { ...newStep.formula, error: \"\" } };\n      } else {\n        return {\n          ...newStep, valid: false, formula: {\n            ...newStep.formula, error: {\n              name: \"LogicError\",\n              message: \"This clause is not valid factor of clause \" + newStep.reference2.input\n            }\n          }\n        };\n      }\n    }\n\n    case \"Resolution\": {\n      if (!reference2[0] || !reference1[0]) {\n        return { ...newStep, valid: false };\n      }\n      const premise1 = getPremise(reference1[1].object, state);\n      const premise2 = getPremise(reference2[1].object, state);\n      if (!premise1 || !premise2 || !formula[0]) {\n        return { ...newStep, valid: false };\n      }\n      if (newStep.formula.object.isResolventOf(premise1.formula.object, premise2.formula.object, newStep.renaming.object, newStep.unifier.object)) {\n        return { ...newStep, valid: true, formula: { ...newStep.formula, error: \"\" } };\n      } else {\n        return {\n          ...newStep, valid: false, formula: {\n            ...newStep.formula, error: {\n              name: \"LogicError\",\n              message: \"This clause is not valid resolvent of clauses \" + newStep.reference1.input + \" and \" + newStep.reference2.input\n            }\n          }\n        };\n      }\n    }\n\n    case \"Assumption\": {\n      if (!formula[0]) {\n        return { ...newStep, valid: false };\n      }\n      return { ...newStep, valid: true };\n    }\n\n    default:\n      return { ...newStep };\n  }\n}\n\nfunction getPremise(reference, state) {\n  const premise = state.allSteps.get(state.order[parseInt(reference)]);\n  if (premise.valid) {\n    return premise;\n  }\n  return null;\n}\n\nexport default steps;","import { CHANGE_CONST, CHANGE_FUN, CHANGE_PRED } from '../actions';\r\nimport { parseConstants, parseFunctions, parsePredicates } from '@fmfi-uk-1-ain-412/js-fol-parser';\r\n\r\n\r\nconst language = (state = { consts: { input: \"\", object: new Set(), error: \"\", symbols: [] }, funs: { input: \"\", object: new Map(), error: \"\", symbols: [] }, preds: { input: \"\", object: new Map(), error: \"\", symbols: [] } }, action = { type: undefined }) => {\r\n    switch (action.type) {\r\n        case CHANGE_CONST:\r\n            let consts = { ...state.consts, input: action.text, error: \"\" };\r\n            try {\r\n                if (action.text !== \"\") {\r\n                    consts.symbols = parseConstants(action.text)\r\n                    consts.object = new Set(consts.symbols);\r\n                } else {\r\n                    consts.symbols = [];\r\n                    consts.object = new Set();\r\n                }\r\n\r\n            } catch (e) {\r\n                consts.error = e;\r\n            }\r\n            return { ...state, \r\n                consts: validateConsts(consts),\r\n                funs: validateFuns(state.funs, consts),\r\n                preds: validatePreds(state.preds, state.funs, consts)\r\n            };\r\n\r\n        case CHANGE_FUN:\r\n            let funs = { ...state.funs, input: action.text, error: \"\" };\r\n            try {\r\n                if (action.text !== \"\") {\r\n                    funs.symbols = parseFunctions(action.text);\r\n                    funs.object = new Map(funs.symbols.map(obj => [obj.name, obj.arity]));\r\n                } else {\r\n                    funs.symbols = [];\r\n                    funs.object = new Map();\r\n                }\r\n            } catch (e) {\r\n                funs.error = e;\r\n            }\r\n            return { ...state, \r\n                funs: validateFuns(funs, state.consts),\r\n                preds: validatePreds(state.preds, funs, state.consts)\r\n            };\r\n\r\n        case CHANGE_PRED:\r\n            let preds = { ...state.preds, input: action.text, error: \"\" };\r\n            try {\r\n                preds.symbols = parsePredicates(action.text);\r\n                preds.object = new Map(preds.symbols.map(obj => [obj.name, obj.arity]));\r\n            } catch (e) {\r\n                preds.error = e;\r\n            }\r\n            return { ...state, \r\n                preds: validatePreds(preds, state.funs, state.consts)\r\n            };\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nfunction validSymbols(symbols) {\r\n    return symbols.error === \"\" && symbols.input !== \"\"\r\n}\r\n\r\nfunction validateConsts(consts) {\r\n    if (!validSymbols(consts) && consts.error.name !== \"DuplicityError\") {\r\n        return consts;\r\n    } else {\r\n        for (let i = 0; i < consts.symbols.length; i++) {\r\n            for (let j = i+1; j < consts.symbols.length; j++) {\r\n                if (consts.symbols[i] === consts.symbols[j]) {\r\n                    return {\r\n                        ...consts,\r\n                        error: {\r\n                            name: \"DuplicityError\",\r\n                            message: \"Symbol \\\"\" + consts.symbols[i] + \"\\\" is already a constant\"\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return {\r\n        ...consts,\r\n        error: \"\"\r\n    }\r\n}\r\n\r\nfunction validateFuns(funs, consts) {\r\n    if (!validSymbols(funs) && funs.error.name !== \"DuplicityError\") {\r\n        return funs;\r\n    } else {\r\n        for (let i = 0; i < funs.symbols.length; i++) {\r\n            for (let j = i+1; j < funs.symbols.length; j++) {\r\n                if (funs.symbols[i].name === funs.symbols[j].name) {\r\n                    return {\r\n                        ...funs,\r\n                        error: {\r\n                            name: \"DuplicityError\",\r\n                            message: \"Symbol \\\"\" + funs.symbols[i].name + \"\\\" is already a function\"\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n    } \r\n    if (validSymbols(consts)) {\r\n        for (const [symbol1, _] of funs.object) {\r\n            for (const symbol2 of consts.object) {\r\n                if (symbol1 === symbol2) {\r\n                    return {\r\n                        ...funs,\r\n                        error: {\r\n                            name: \"DuplicityError\",\r\n                            message: \"Symbol \\\"\" + symbol1 + \"\\\" is already a constant\"\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return {\r\n        ...funs,\r\n        error: \"\"\r\n    }\r\n}\r\n\r\nfunction validatePreds(preds, funs, consts) {\r\n    if (!validSymbols(preds) && preds.error.name !== \"DuplicityError\") {\r\n        return preds;\r\n    } else {\r\n        for (let i = 0; i < preds.symbols.length; i++) {\r\n            for (let j = i+1; j < preds.symbols.length; j++) {\r\n                if (preds.symbols[i].name === preds.symbols[j].name) {\r\n                    return {\r\n                        ...preds,\r\n                        error: {\r\n                            name: \"DuplicityError\",\r\n                            message: \"Symbol \\\"\" + preds.symbols[i].name + \"\\\" is already a predicate\"\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (validSymbols(funs)) {\r\n        for (const [symbol1, _] of funs.object) {\r\n            for (const [symbol2, _] of preds.object) {\r\n                if (symbol1 === symbol2) {\r\n                    return {\r\n                        ...preds,\r\n                        error: {\r\n                            name: \"DuplicityError\",\r\n                            message: \"Symbol \\\"\" + symbol1 + \"\\\" is already a function\"\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n    } \r\n    if (validSymbols(consts)) {\r\n        for (const symbol1 of consts.object) {\r\n            for (const [symbol2, _] of preds.object) {\r\n                if (symbol1 === symbol2) {\r\n                    return {\r\n                        ...preds,\r\n                        error: {\r\n                            name: \"DuplicityError\",\r\n                            message: \"Symbol \\\"\" + symbol1 + \"\\\" is already a constant\"\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return {\r\n        ...preds,\r\n        error: \"\"\r\n    }\r\n\r\n}\r\n\r\nexport default language;","import undoable, { newHistory } from 'redux-undo';\nimport { ADD_STEP, CHANGE_STEP, DELETE_STEP, INSERT_STEP, STEP_UP, STEP_DOWN, CHANGE_RULE, CHANGE_RENAMING, CHANGE_REFERENCE1, CHANGE_REFERENCE2, CHANGE_UNIFIER, CHANGE_CONST, CHANGE_FUN, CHANGE_PRED, INPUT_FOCUS, INPUT_BLUR, EXPORT_STATE, IMPORT_STATE } from '../actions'\nimport steps from './steps'\nimport language from './language'\n\nconst initialCombinedState = {\n  language: language(),\n  steps: steps(),\n  inputChange: { originValue: \"\" }\n};\n\nexport const freshState = exportState(newHistory([], initialCombinedState, []));\n\nfunction app(state = initialCombinedState, action) {\n  switch (action.type) {\n    case CHANGE_CONST:\n    case CHANGE_FUN:\n    case CHANGE_PRED: {\n      const languageState = language(state.language, action);\n      const stepsState = steps(state.steps, action, languageState);\n      return { ...state, language: languageState, steps: stepsState };\n    }\n    case INPUT_FOCUS: {\n      return { ...state, inputChange: { originValue: action.text } }\n    }\n    case ADD_STEP:\n    case CHANGE_STEP:\n    case DELETE_STEP:\n    case INSERT_STEP:\n    case STEP_UP:\n    case STEP_DOWN:\n    case CHANGE_RULE:\n    case CHANGE_REFERENCE1:\n    case CHANGE_REFERENCE2:\n    case CHANGE_RENAMING:\n    case CHANGE_UNIFIER: {\n      const stepsState = steps(state.steps, action, state.language);\n      return { ...state, language: state.language, steps: stepsState }\n    }\n    case EXPORT_STATE: {\n      let link = document.createElement('a');\n      link.setAttribute(\"download\", \"resolutionProof\");\n      let stateCopy = {\n        ...state,\n        language: {\n          ...state.language,\n          consts: {\n            ...state.language.consts,\n            object: Array.from(state.language.consts.object)\n          },\n          funs: {\n            ...state.language.funs,\n            object: Array.from(state.language.funs.object.entries())\n          },\n          preds: {\n            ...state.language.preds,\n            object: Array.from(state.language.preds.object.entries())\n          }\n        },\n        steps: {\n          ...state.steps,\n          allSteps: Array.from(state.steps.allSteps.entries()),\n          rank: Array.from(state.steps.rank.entries())\n        }\n      }\n      let data = new Blob([JSON.stringify(stateCopy)], { type: 'application/json' });\n      let url = window.URL.createObjectURL(data);\n      link.href = url;\n      link.click();\n      return state;\n    }\n    case IMPORT_STATE: {\n      let state = JSON.parse(action.data);\n      state.steps.allSteps = new Map(state.steps.allSteps);\n      state.steps.rank = new Map(state.steps.rank);\n      state.language.consts.object = new Set(state.language.consts.object);\n      state.language.funs.object = new Map(state.language.funs.object);\n      state.language.preds.object = new Map(state.language.preds.object);\n      state.steps = steps(state.steps, action, state.language);\n      return state;\n    }\n    default: {\n      return state;\n    }\n\n  }\n}\n\nconst undoableState = undoable(app, {\n  filter: function filterActions(action, currentState, previousHistory) {\n    switch (action.type) {\n      case CHANGE_STEP:\n      case CHANGE_CONST:\n      case CHANGE_FUN:\n      case CHANGE_PRED:\n      case CHANGE_REFERENCE1:\n      case CHANGE_REFERENCE2:\n      case CHANGE_RENAMING:\n      case CHANGE_UNIFIER:\n      case INPUT_FOCUS: {\n        return false\n      }\n\n      case INPUT_BLUR: {\n        if (action.text !== currentState.inputChange.originValue) {\n          return true;\n        } else {\n          return false;\n        }\n      }\n\n      default:\n        return true;\n    }\n  }\n})\n\nexport function importState(stringData) {\n  let present = JSON.parse(stringData);\n  present.steps.allSteps = new Map(present.steps.allSteps);\n  present.steps.rank = new Map(present.steps.rank);\n  present.language.consts.object = new Set(present.language.consts.object);\n  present.language.funs.object = new Map(present.language.funs.object);\n  present.language.preds.object = new Map(present.language.preds.object);\n  present.steps = steps(present.steps, {type: IMPORT_STATE}, present.language);\n  let newState = newHistory([], present, []);\n  return newState;\n}\n\nexport function exportState(originState) {\n  return JSON.stringify({\n    ...originState.present,\n    language: {\n      ...originState.present.language,\n      consts: {\n        ...originState.present.language.consts,\n        object: Array.from(originState.present.language.consts.object)\n      },\n      funs: {\n        ...originState.present.language.funs,\n        object: Array.from(originState.present.language.funs.object.entries())\n      },\n      preds: {\n        ...originState.present.language.preds,\n        object: Array.from(originState.present.language.preds.object.entries())\n      }\n    },\n    steps: {\n      ...originState.present.steps,\n      allSteps: Array.from(originState.present.steps.allSteps.entries()),\n      rank: Array.from(originState.present.steps.rank.entries())\n    }\n  });\n}\n\nexport default undoableState;","import React from 'react'\r\nimport { render } from 'react-dom'\r\nimport { createStore } from 'redux'\r\nimport { Provider } from 'react-redux'\r\nimport App from './components/App'\r\nimport reducer from './reducers'\r\n\r\nconst store = createStore(reducer)\r\n\r\nrender(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}